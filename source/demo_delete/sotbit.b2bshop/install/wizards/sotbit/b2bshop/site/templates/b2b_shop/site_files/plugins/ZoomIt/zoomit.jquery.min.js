!function(o){o.fn.jqZoomIt=function(e){if(this.length>1)return this.each(function(){o(this).jqZoomIt(e)}),this;var t={mouseEvent:"mouseenter",zoomAreaMove:"mousemove",zoomPosition:"right",zoomClass:"zoomIt_zoomed",zoomLoadingClass:"zoomIt_loading",zoomAreaClass:"zoomIt_area",zoomAreaColor:"#FFF",zoomAreaOpacity:.5,zoomDistance:10,multiplierX:1.2,multiplierY:1.2,init:function(){},zoom:function(){},close:function(){},is_touch:null},e=o.extend({},t,e),i=this,a=o(this).attr("href"),n=o("img",this);if(""==a||0==n.length)return!1;var s=function(){c(),d();var t=h()?"touchstart":"click"==e.mouseEvent?"click":"mouseenter",a=h()?"touchend":"mouseleave";return o(i).bind(t,function(o){o.preventDefault(),r(),e.zoom.call(i,{})}),o(i).bind(a,function(){l(),e.close.call(i,{})}),o(window).bind("resize",function(){c(),o.data(i,"loaded",!1),fullImg=""}),e.init.call(i,{}),i},r=function(){var t=o("."+e.zoomClass+":visible img").css("top"),n=o("."+e.zoomClass+":visible img").css("left"),s=u(),r=m();if(o(s.zoomer).stop(!0,!0).fadeIn("400").css({top:r.zTop,left:r.zLeft,width:r.width*(e.multiplierX||1),height:r.height*(e.multiplierY||1)}),o(s.zoomer).children("img").css({top:t,left:n}),!o.data(i,"no_zoom")){if(o.data(i,"loaded"))return void o(s.preview).show();o(s.preview).css({display:"block",opacity:"0"}),o(s.zoomer).addClass(e.zoomLoadingClass);var l=o("<img />",{src:a}).load(function(){o(s.zoomer).removeClass(e.zoomLoadingClass),l.css({position:"absolute",top:t,left:n}).appendTo(o(s.zoomer)),o.data(i,"loaded",!0);var a=l.width(),c=l.height(),d=a/r.width,u=c/r.height,p=r.width/d*(e.multiplierX||1),f=r.height/u*(e.multiplierY||1);if(e.multiplierX>d&&e.multiplierY>u)return o(s.zoomer).css({width:a,height:c}),void o.data(i,"no_zoom",!0);if("drag"==e.zoomAreaMove&&o.fn.draggable&&!h())o(i).removeAttr("href"),o(s.preview).draggable({containment:"parent",drag:function(e,t){var i=o(s.preview).position(),a=-(i.left*d),n=-(i.top*u);l.css({left:a,top:n})}});else{var z=h()?"touchmove":"mousemove";o(i).bind(z,function(e){var t=0,i=0;h()?(e.preventDefault(),event=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],t=event.pageX,i=event.pageY):(t=e.pageX,i=e.pageY);var a=m(),n=t-a.left-p/2,r=i-a.top-f/2;t<a.left+p/2&&(n=0),i<a.top+f/2&&(r=0),t>a.left+a.width-p/2&&(n=a.width-p),i>a.top+a.height-f/2&&(r=a.height-f),o(s.preview).css({left:n,top:r}),l.css({left:-(n*d),top:-(r*u)})})}o(s.preview).css({width:p,height:f,opacity:e.zoomAreaOpacity||.7})})}},l=function(){var e=u();o(e.zoomer).fadeOut("400",function(){o(this).css({top:-5e3,left:-5e3})}),o(e.preview).hide()},c=function(){var t=o(n[0]).offset(),i={width:o(n[0]).outerWidth(),height:o(n[0]).outerHeight(),top:t.top,left:t.left,zTop:t.top,zLeft:t.left};switch(e.zoomPosition){case"right":default:i.zLeft+=i.width+e.zoomDistance;break;case"left":i.zLeft-=i.width*(e.multiplierX||1)+e.zoomDistance;break;case"bottom":i.zTop+=i.height+e.zoomDistance;break;case"top":i.zTop-=i.height*(e.multiplierY||1)+e.zoomDistance}return o.data(n[0],"size",i),i},m=function(){return o.data(n[0],"size")},d=function(){var t=o("<div />",{"class":e.zoomAreaClass,css:{"background-color":e.zoomAreaColor||"#999",opacity:e.zoomAreaOpacity||.7,display:"none",position:"absolute",top:0,left:0,cursor:"move","z-index":1e4}}).appendTo(o(i)),a=m(),s=o("<div />",{"class":e.zoomClass,css:{display:"none",position:"absolute",top:-1e3,overflow:"hidden",width:a.width*(e.multiplierX||1),height:a.height*(e.multiplierY||1),"z-index":10500}}).appendTo(o(document.body)),r={zoomer:s,preview:t};o.data(n[0],"elems",r)},u=function(){return o.data(n[0],"elems")},h=function(){return null!==e.is_touch?e.is_touch:/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)};return s()}}(jQuery);